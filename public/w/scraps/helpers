

###cgi escaping string and allowing only url valid chars

~~~ruby
CGI::escape('string')
~~~
so for instance */ & ?*  will pass trought



##escape all chars that cannot be in URL

~~~ruby
def url_escape(string)
 string.gsub(/([^ a-zA-Z0-9_.-]+)/n) do
  '%' + $1.unpack('H2' * $1.size).join('%').upcase
 end.tr(' ', '+')
end

def url_unescape(string)
 string.tr('+', ' ').gsub(/((?:%[0-9a-fA-F]{2})+)/n) do
  [$1.delete('%')].pack('H*')
 end
end
~~~
